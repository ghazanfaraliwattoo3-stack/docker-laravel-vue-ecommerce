import{_,e as n,o as i,b as t,a,w as c,g as x,r as l,D as k,t as v,d as g,l as m}from"./app-CQS9kvMx.js";import{E as V,F,a as w,c as C,b as E}from"./index.esm-f_DBmKnk.js";const S={name:"EditCategory",components:{Form:w,Field:F,ErrorMessage:V},data(){return{schema:C().shape({name:E().required()}),category:{},errors:null,token:this.$store.getters["user/token"],id:this.$route.params.id}},methods:{async fetchCategory(){try{const s=await g.get(`/api/categories/${this.id}`,{headers:{Authorization:`Bearer ${this.token}`}});console.log("API Response:",s.data),s.status===200&&(this.category=s.data.data)}catch(s){s.response?s.response.data.errors?this.errors=s.response.data.errors:this.errors=s.response.data.message:m.error("Failed to fetch product")}},async onSubmit(s){const e=s.name,u=s.status;try{(await g.put(`/api/categories/${this.id}`,{name:e,status:u},{headers:{Authorization:`Bearer ${this.token}`}})).status===200&&(this.$router.push({name:"categories"}),setTimeout(()=>{m.success("Update category successfully")},1))}catch(r){r.response?r.response.data.errors?this.errors=r.response.data.errors:this.errors=r.response.data.message:m.error("Something went wrong. Please try later.")}}},mounted(){this.fetchCategory(),console.log("id",this.id)}},B={class:"container"},N={class:"d-flex justify-content-end"},U={key:0},A={key:0},$={class:"alert alert-danger"},D={class:"mb-3"},M={class:"mb-3"},P={key:1,class:"d-flex justify-content-center"};function j(s,e,u,r,o,f){const y=l("router-link"),p=l("Field"),h=l("ErrorMessage"),b=l("Form");return i(),n("div",B,[t("div",N,[a(y,{to:{name:"categories"},class:"btn text-decoration-underline"},{default:c(()=>e[2]||(e[2]=[x("Go to back")])),_:1})]),e[8]||(e[8]=t("h3",{class:"text-center my-5"},"Update Form",-1)),o.category?(i(),n("div",U,[a(b,{class:"col-8 mx-auto",onSubmit:f.onSubmit,"validation-schema":o.schema},{default:c(()=>[o.errors?(i(),n("div",A,[t("div",$,v(o.errors),1)])):k("",!0),t("div",D,[e[3]||(e[3]=t("label",{for:"name",class:"form-label"},"Name",-1)),a(p,{type:"text",class:"form-control",id:"name",name:"name","aria-describedby":"emailHelp",modelValue:o.category.name,"onUpdate:modelValue":e[0]||(e[0]=d=>o.category.name=d)},null,8,["modelValue"]),a(h,{name:"name",class:"text-danger"})]),t("div",M,[e[5]||(e[5]=t("label",{for:"exampleInputPassword1",class:"form-label"},"Status",-1)),a(p,{as:"select",class:"form-select","aria-label":"Default select example",name:"status",modelValue:o.category.status,"onUpdate:modelValue":e[1]||(e[1]=d=>o.category.status=d)},{default:c(()=>e[4]||(e[4]=[t("option",{value:"1",selected:""},"Active",-1),t("option",{value:"0"},"Block",-1)])),_:1},8,["modelValue"])]),e[6]||(e[6]=t("button",{type:"submit",class:"btn btn-dark"}," Update Category ",-1))]),_:1},8,["onSubmit","validation-schema"])])):(i(),n("div",P,e[7]||(e[7]=[t("div",{class:"spinner-border text-primary",role:"status"},[t("span",{class:"text-center d-block visually-hidden"},"Loading...")],-1)])))])}const T=_(S,[["render",j]]);export{T as default};

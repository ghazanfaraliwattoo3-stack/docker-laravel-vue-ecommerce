import{_ as p,e as h,o as c,b as r,G as w,h as n,C as d,n as m,t as u,d as f,l as a}from"./app-Cv1FRrpp.js";const b={data(){return{user:{email:"",password:""},userInfo:{name:"",id:"",token:""},error:{email:"",password:""},errors:null}},methods:{async onSubmit(){const i=/^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/;if(!this.user.email){this.error.email="Email is required";return}if(this.user.email&&!i.test(this.user.email)){this.error.email="Please, enter valid email";return}if(this.error.email="",!this.user.password){this.error.password="Password is required";return}if(this.user.password&&this.user.password.length<6){this.error.password="Password must be at least 6 characters";return}this.error.email="";try{const s=await f.post("/api/admin/login",{email:this.user.email,password:this.user.password});if(s.status===200){const t={id:s.data.id,name:s.data.name,token:s.data.token};this.$store.dispatch("user/set_login",t),this.$router.push("/admin/dashboard"),setTimeout(()=>{a.success("login successfully")},1)}}catch(s){s.response?(this.errors=s.response.data.errors,console.log(s.response.data.errors),this.errors&&(this.error.email=this.errors.email?this.error.email[0]:"",this.error.password=this.errors.password?this.error.password:""),s.response.data.message&&a.error(s.response.data.message)):a.error("An error occured.Please try again")}}}},v={class:"row my-3"},g={class:"col-4 mx-auto py-5 border-0 card shadow"},y={class:"mb-3"},_={class:"invalid-feedback"},k={class:"mb-3"},x={class:"invalid-feedback"};function A(i,s,t,P,e,l){return c(),h("div",v,[r("div",g,[r("form",{onSubmit:s[2]||(s[2]=w((...o)=>l.onSubmit&&l.onSubmit(...o),["prevent"]))},[s[5]||(s[5]=r("h3",{class:"text-center pb-3"},"Admin Login",-1)),r("div",y,[s[3]||(s[3]=r("label",{for:"email",class:"form-label"},"Email",-1)),n(r("input",{name:"email",class:m(["form-control my-1",{"is-invalid":e.error.email}]),"onUpdate:modelValue":s[0]||(s[0]=o=>e.user.email=o)},null,2),[[d,e.user.email]]),r("span",_,u(e.error.email),1)]),r("div",k,[s[4]||(s[4]=r("label",{for:"password",class:"form-label"},"Password",-1)),n(r("input",{name:"password",type:"password",class:m(["form-control my-1",{"is-invalid":e.error.password}]),"onUpdate:modelValue":s[1]||(s[1]=o=>e.user.password=o)},null,2),[[d,e.user.password]]),r("span",x,u(e.error.password),1)]),s[6]||(s[6]=r("div",{class:"py-3"},[r("button",{class:"btn btn-dark"},"Login")],-1))],32)])])}const z=p(b,[["render",A]]);export{z as default};

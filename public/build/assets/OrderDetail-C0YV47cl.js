import{_ as h,e as r,o as d,b as s,a as g,w as f,g as y,r as v,t as n,D as i,F as w,f as b,h as c,H as u,d as p,l as _}from"./app-CXIB815l.js";const x={data(){return{order:null,loading:!1,token:this.$store.getters["user/token"],params:this.$route.params,status:"",payment_status:""}},methods:{async fetchOrder(){this.loading=!0;try{const o=await p.get(`/api/single-order/${this.params.id}`,{headers:{Authorization:`Bearer ${this.token}`}});o.status===200&&(this.order=o.data.data,this.payment_status=this.order.payment_status,this.status=this.order.status)}catch(o){console.log("Error fetching products",o)}finally{this.loading=!1}},formatCreatedAt(o){const t={year:"numeric",month:"long",day:"numeric"};return new Date(o).toLocaleDateString("en-US",t)},async updateOrder(){this.loading=!0;try{const o=await p.post(`/api/update-order/${this.order.id}`,{payment_status:this.payment_status,status:this.status},{headers:{Authorization:`Bearer ${this.token}`}});o.status===200&&o.data&&(_.success("Order updated successfully!"),this.fetchOrder())}catch(o){console.log("Error fetching order update",o),_.error("Some thing went wrond!")}finally{this.loading=!1}}},mounted(){this.fetchOrder()}},k={key:0},S={class:"clearfix pb-3"},D={class:"row row-cols-1 row-cols-md-2 g-4"},O={class:"col w-75"},C={class:"card border-0 shadow px-3 py-3"},P={class:"row"},N={class:"d-flex justify-content-between"},V={class:"fw-bold"},j={key:0,class:"badge bg-warning"},B={key:1,class:"badge bg-primary"},A={key:2,class:"badge bg-success"},U={key:3,class:"badge bg-danger"},E={class:"row row-cols-1 row-cols-md-2"},F={class:"col"},L={class:"m-0 fw-bold"},z={class:"m-0"},I={class:"m-0"},T={class:"m-0"},G={class:"col"},H={key:0,class:"m-0 badge bg-success"},M={key:1,class:"m-0 badge bg-danger"},q={class:"row py-3"},J={class:"col w-75"},K={class:"row row-cols-1 row-cols-md-2"},Q=["src"],R={class:"d-inline-block col p-0"},W={class:"col w-25"},X={class:"row my-3"},Y={class:"col"},Z={class:"d-flex justify-content-between"},$={class:"fw-medium"},ss={class:"d-flex justify-content-between"},ts={class:"fw-medium"},es={class:"d-flex justify-content-between"},os={class:"fw-medium"},rs={class:"col w-25"},ds={class:"card border-0 shadow px-3 py-3"},ns={key:1,class:"py-5"},ls={key:2};function is(o,t,as,cs,e,a){const m=v("router-link");return e.order!=null?(d(),r("div",k,[s("div",S,[g(m,{to:{name:"admin-order"},class:"float-end text-decoration-none btn btn-info border-0 text-light"},{default:f(()=>t[3]||(t[3]=[y(" back")])),_:1})]),s("div",D,[s("div",O,[s("div",C,[s("div",P,[s("div",N,[s("div",null,[s("h4",null,"Order Id #:"+n(e.order.id),1)]),s("div",null,[t[4]||(t[4]=s("p",{class:"m-0"},"Date",-1)),s("p",V,n(a.formatCreatedAt(e.order.created_at)),1)]),s("div",null,[t[5]||(t[5]=s("p",{class:"m-0"},"Payment Status",-1)),e.order.status==="pending"?(d(),r("p",j," Pending ")):i("",!0),e.order.status==="shipped"?(d(),r("p",B," Shipped ")):i("",!0),e.order.status==="delivered"?(d(),r("p",A," Delivered ")):i("",!0),e.order.status==="cancelled"?(d(),r("p",U," Cancelled ")):i("",!0)])])]),s("div",E,[s("div",F,[s("p",L,n(e.order.name),1),s("p",z,n(e.order.email),1),s("p",I,n(e.order.mobile),1),s("p",T,n(e.order.address),1)]),s("div",G,[t[6]||(t[6]=s("p",{class:"m-0"},"Payment Status",-1)),e.order.payment_status=="paid"?(d(),r("p",H," Paid ")):(d(),r("p",M,"COD"))])]),s("div",q,[t[10]||(t[10]=s("strong",null,"Items",-1)),(d(!0),r(w,null,b(e.order.order_items,l=>(d(),r("div",{class:"row row-cols-1 row-cols-md-2 py-3",key:l.id},[s("div",J,[s("div",K,[s("img",{src:l.image,class:"d-inline-block col",style:{width:"100px"}},null,8,Q),s("p",R,n(l.name),1)])]),s("div",W,"$"+n(l.price),1)]))),128)),s("div",X,[s("div",Y,[s("div",Z,[t[7]||(t[7]=s("strong",null,"Subtotal",-1)),s("p",$," $"+n(e.order.subtotal),1)]),s("div",ss,[t[8]||(t[8]=s("strong",null,"Shipping",-1)),s("p",ts," $"+n(e.order.shipping),1)]),s("div",es,[t[9]||(t[9]=s("strong",null,"Grand Total",-1)),s("p",os," $"+n(e.order.grand_total),1)])])])])])]),s("div",rs,[s("div",ds,[s("div",null,[t[12]||(t[12]=s("strong",null,"Status",-1)),c(s("select",{class:"form-select","aria-label":"Default select example","onUpdate:modelValue":t[0]||(t[0]=l=>e.status=l)},t[11]||(t[11]=[s("option",{selected:"",value:"pending"},"Pending",-1),s("option",{value:"shipped"},"Shipped",-1),s("option",{value:"delivered"},"Delivered",-1),s("option",{value:"cancelled"},"Cancelled",-1)]),512),[[u,e.status]])]),s("div",null,[t[14]||(t[14]=s("strong",null,"Payment Status",-1)),c(s("select",{class:"form-select","aria-label":"Default select example","onUpdate:modelValue":t[1]||(t[1]=l=>e.payment_status=l)},t[13]||(t[13]=[s("option",{selected:"",value:"not paid"},"Not Paid",-1),s("option",{value:"paid"},"Paid",-1)]),512),[[u,e.payment_status]])]),s("button",{class:"btn btn-info my-3 text-light",onClick:t[2]||(t[2]=(...l)=>a.updateOrder&&a.updateOrder(...l))},"Update")])])])])):e.loading?(d(),r("div",ns,t[15]||(t[15]=[s("div",{class:"d-flex justify-content-center"},[s("div",{class:"spinner-border text-info",role:"status"},[s("span",{class:"visually-hidden"},"Loading...")])],-1)]))):(d(),r("div",ls,t[16]||(t[16]=[s("h3",{class:"text-center text-danger py-5"},"No order Found",-1)])))}const ps=h(x,[["render",is]]);export{ps as default};

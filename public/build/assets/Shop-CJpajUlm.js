import{_ as m,e as i,o as d,b as s,a as u,w as h,g as p,r as y,F as _,f as g,h as b,v,t as n,d as f}from"./app-hbwqlvku.js";const k={data(){return{checkCategories:[],checkBrands:[],brands:[],categories:[],products:[],loading:!1}},methods:{async fetchBrands(){try{const e=await f.get("/api/get-brands");e.status===200&&e.data&&(this.brands=e.data.data)}catch(e){console.log(e)}},async fetchCategories(){try{const e=await f.get("/api/get-categories");e.status===200&&e.data&&(this.categories=e.data.data)}catch(e){console.log(e)}},async fetchProducts(){this.loading=!0;try{const e=await f.post("/api/filter-products",{categoryId:this.checkCategories,brandId:this.checkBrands});e.status===200&&e.data&&(this.products=e.data.data)}catch(e){console.log(e)}}},watch:{"$route.query.categoryId"(e){e?this.checkCategories=[parseInt(e)]:this.checkCategories=[],this.fetchProducts()}},mounted(){const e=this.$route.query.categoryId;e&&(this.checkCategories=[parseInt(e)]),this.fetchBrands(),this.fetchCategories(),this.fetchProducts()}},x={class:"container my-3"},w={"aria-label":"breadcrumb"},C={class:"breadcrumb py-3"},B={class:"breadcrumb-item"},P={class:"row"},I={class:"col-3"},V={class:"card border-0 shadow mb-3"},j={class:"card-body p-5"},L={key:0,class:"p-0"},N=["id","value"],F=["for"],S={key:1,class:"p-0"},q={class:"card border-0 shadow"},D={class:"card-body p-5"},U={key:0,class:"p-0"},E=["id","value"],H=["for"],M={key:1,class:"p-0"},O={class:"col-9"},T={key:0,class:"row row-cols-md-3 pb-5"},z={class:"product card border-0"},A={class:"card-img overflow-hidden"},G=["src","alt"],J={class:"card-body"},K={class:"price"},Q={class:"text-decoration-line-through px-2"},R={key:1,class:"row pb-5 h-100"},W={key:2,class:"row pb-5 h-100"};function X(e,t,Y,Z,r,c){const l=y("router-link");return d(),i("div",x,[s("nav",w,[s("ol",C,[s("li",B,[u(l,{to:"/"},{default:h(()=>t[4]||(t[4]=[p("Home")])),_:1})]),t[5]||(t[5]=s("li",{class:"breadcrumb-item active","aria-current":"page"},"Shop",-1))])]),s("div",P,[s("div",I,[s("div",V,[s("div",j,[t[7]||(t[7]=s("h3",{class:"mb-3"},"Categories",-1)),r.categories&&r.categories.length>0?(d(),i("ul",L,[(d(!0),i(_,null,g(r.categories,o=>(d(),i("li",{key:o.id},[b(s("input",{type:"checkbox",id:`category-${o.id}`,"onUpdate:modelValue":t[0]||(t[0]=a=>r.checkCategories=a),value:o.id,onChange:t[1]||(t[1]=(...a)=>c.fetchProducts&&c.fetchProducts(...a))},null,40,N),[[v,r.checkCategories]]),s("label",{class:"ps-2",for:`category-${o.id}`},n(o.name),9,F)]))),128))])):(d(),i("ul",S,t[6]||(t[6]=[s("li",null,[s("div",{class:"d-flex justify-content-center"},[s("div",{class:"spinner-border spinner-border-sm text-info",role:"status"},[s("span",{class:"visually-hidden"},"Loading...")])])],-1)])))])]),s("div",q,[s("div",D,[t[9]||(t[9]=s("h3",{class:"mb-3"},"Brands",-1)),r.brands&&r.brands.length>0?(d(),i("ul",U,[(d(!0),i(_,null,g(r.brands,o=>(d(),i("li",{key:o.id},[b(s("input",{type:"checkbox",id:`brand-${o.id}`,"onUpdate:modelValue":t[2]||(t[2]=a=>r.checkBrands=a),value:o.id,onChange:t[3]||(t[3]=(...a)=>c.fetchProducts&&c.fetchProducts(...a))},null,40,E),[[v,r.checkBrands]]),s("label",{class:"ps-2",for:`brand-${o.id}`},n(o.name),9,H)]))),128))])):(d(),i("ul",M,t[8]||(t[8]=[s("li",null,[s("div",{class:"d-flex justify-content-center"},[s("div",{class:"spinner-border spinner-border-sm text-info",role:"status"},[s("span",{class:"visually-hidden"},"Loading...")])])],-1)])))])])]),s("div",O,[r.products&&r.products.length>0?(d(),i("div",T,[(d(!0),i(_,null,g(r.products,o=>(d(),i("div",{class:"col",key:o.id},[s("div",z,[s("div",A,[u(l,{to:`/product/${o.id}`},{default:h(()=>[s("img",{src:`uploads/products/small/${o.image}`,class:"w-100 rounded",alt:o.title},null,8,G)]),_:2},1032,["to"])]),s("div",J,[u(l,{to:`/product/${o.id}`,class:"text-decoration-none"},{default:h(()=>[p(n(o.title),1)]),_:2},1032,["to"]),s("div",K,[p(" $"+n(o.price)+" ",1),s("span",Q,"$"+n(o.compare_price),1)])])])]))),128))])):r.loading?(d(),i("div",R,t[10]||(t[10]=[s("div",{class:"d-flex justify-content-center align-items-center"},[s("div",{class:"spinner-border spinner-border text-info",role:"status"},[s("span",{class:"visually-hidden"},"Loading...")])],-1)]))):(d(),i("div",W,t[11]||(t[11]=[s("div",{class:"d-flex justify-content-center align-items-center my-3"},[s("h3",{class:"text-center text-danger"}," Oops! No Products Found ")],-1)])))])])])}const ss=m(k,[["render",X]]);export{ss as default};

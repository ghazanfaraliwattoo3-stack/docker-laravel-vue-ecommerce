import{_ as x,e as n,o as d,b as t,a,w as m,g,r as i,D as k,t as v,d as b,l as c}from"./app-hbwqlvku.js";import{E as V,F,a as w,c as S,b as B}from"./index.esm-CNk301a5.js";const E={name:"Editbrand",components:{Form:w,Field:F,ErrorMessage:V},data(){return{schema:S().shape({name:B().required()}),brand:{},errors:null,token:this.$store.getters["user/token"],id:this.$route.params.id}},methods:{async fetchbrand(){try{const s=await b.get(`/api/brands/${this.id}`,{headers:{Authorization:`Bearer ${this.token}`}});console.log("API Response:",s.data),s.status===200&&(this.brand=s.data.data)}catch(s){s.response?s.response.data.errors?this.errors=s.response.data.errors:this.errors=s.response.data.message:c.error("Failed to fetch product")}},async onSubmit(s){const e=s.name,u=s.status;try{(await b.put(`/api/brands/${this.id}`,{name:e,status:u},{headers:{Authorization:`Bearer ${this.token}`}})).status===200&&(this.$router.push({name:"brands"}),setTimeout(()=>{c.success("Update brand successfully")},1))}catch(o){o.response?o.response.data.errors?this.errors=o.response.data.errors:this.errors=o.response.data.message:c.error("Something went wrong. Please try later.")}}},mounted(){this.fetchbrand(),console.log("id",this.id)}},U={class:"container"},N={class:"d-flex justify-content-end"},A={key:0},$={key:0},C={class:"alert alert-danger"},D={class:"mb-3"},M={class:"mb-3"},P={key:1,class:"d-flex justify-content-center"};function j(s,e,u,o,r,f){const h=i("router-link"),p=i("Field"),_=i("ErrorMessage"),y=i("Form");return d(),n("div",U,[t("div",N,[a(h,{to:{name:"brands"},class:"btn text-decoration-underline"},{default:m(()=>e[2]||(e[2]=[g("Go to back")])),_:1})]),e[8]||(e[8]=t("h3",{class:"text-center my-5"},"Update Form brnad",-1)),r.brand?(d(),n("div",A,[a(y,{class:"col-8 mx-auto",onSubmit:f.onSubmit,"validation-schema":r.schema},{default:m(()=>[r.errors?(d(),n("div",$,[t("div",C,v(r.errors),1)])):k("",!0),t("div",D,[e[3]||(e[3]=t("label",{for:"name",class:"form-label"},"Name",-1)),a(p,{type:"text",class:"form-control",id:"name",name:"name","aria-describedby":"emailHelp",modelValue:r.brand.name,"onUpdate:modelValue":e[0]||(e[0]=l=>r.brand.name=l)},null,8,["modelValue"]),a(_,{name:"name",class:"text-danger"})]),t("div",M,[e[5]||(e[5]=t("label",{for:"exampleInputPassword1",class:"form-label"},"Status",-1)),a(p,{as:"select",class:"form-select","aria-label":"Default select example",name:"status",modelValue:r.brand.status,"onUpdate:modelValue":e[1]||(e[1]=l=>r.brand.status=l)},{default:m(()=>e[4]||(e[4]=[t("option",{value:"1",selected:""},"Active",-1),t("option",{value:"0"},"Block",-1)])),_:1},8,["modelValue"])]),e[6]||(e[6]=t("button",{type:"submit",class:"btn btn-dark"}," Update brand ",-1))]),_:1},8,["onSubmit","validation-schema"])])):(d(),n("div",P,e[7]||(e[7]=[t("div",{class:"spinner-border text-primary",role:"status"},[t("span",{class:"text-center d-block visually-hidden"},"Loading...")],-1)])))])}const T=x(E,[["render",j]]);export{T as default};

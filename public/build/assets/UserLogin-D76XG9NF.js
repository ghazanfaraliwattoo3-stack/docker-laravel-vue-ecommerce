import{_ as f,e as d,o as m,b as r,G as b,D as g,t as i,h as u,C as p,n as c,g as h,a as v,w as y,r as _,d as k,l as a}from"./app-CXIB815l.js";const x={data(){return{user:{email:"",password:""},userInfo:{name:"",id:"",token:""},error:{email:"",password:""},errors:null}},methods:{async onSubmit(){const t=/^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/;if(!this.user.email){this.error.email="Email is required";return}if(this.user.email&&!t.test(this.user.email)){this.error.email="Please, enter valid email";return}if(this.error.email="",!this.user.password){this.error.password="Password is required";return}if(this.user.password&&this.user.password.length<6){this.error.password="Password must be at least 6 characters";return}this.error.email="";try{const s=await k.post("/api/user/login",{email:this.user.email,password:this.user.password});if(s.status===200){const l={id:s.data.data.id,name:s.data.data.name,token:s.data.token};this.$store.dispatch("customer/set_login",l),this.$router.push("/home"),setTimeout(()=>{a.success("login successfully")},1)}}catch(s){s.response?(this.errors=s.response.data.errors,console.log(s.response.data.errors),a.error(s.response.data.errors),this.errors&&(this.error.email=this.errors.email?this.error.email[0]:"",this.error.password=this.errors.password?this.error.password:""),s.response.data.message&&a.error(s.response.data.message)):a.error("An error occured.Please try again")}}}},V={class:"row my-3"},C={class:"col-4 mx-auto py-5 border-0 card shadow"},D={key:0},P={class:"alert alert-danger"},S={class:"mb-3"},q={class:"invalid-feedback"},z={class:"mb-3"},A={class:"invalid-feedback"},E={class:"py-3 text-center"};function N(t,s,l,U,e,n){const w=_("router-link");return m(),d("div",V,[r("div",C,[r("form",{onSubmit:s[2]||(s[2]=b((...o)=>n.onSubmit&&n.onSubmit(...o),["prevent"]))},[t.$route.query.message?(m(),d("div",D,[r("div",P,i(t.$route.query.message),1)])):g("",!0),s[7]||(s[7]=r("h3",{class:"text-center pb-3"},"User Login",-1)),r("div",S,[s[3]||(s[3]=r("label",{for:"email",class:"form-label"},"Email",-1)),u(r("input",{name:"email",class:c(["form-control my-1",{"is-invalid":e.error.email}]),"onUpdate:modelValue":s[0]||(s[0]=o=>e.user.email=o)},null,2),[[p,e.user.email]]),r("span",q,i(e.error.email),1)]),r("div",z,[s[4]||(s[4]=r("label",{for:"password",class:"form-label"},"Password",-1)),u(r("input",{name:"password",type:"password",class:c(["form-control my-1",{"is-invalid":e.error.password}]),"onUpdate:modelValue":s[1]||(s[1]=o=>e.user.password=o)},null,2),[[p,e.user.password]]),r("span",A,i(e.error.password),1)]),s[8]||(s[8]=r("div",{class:"py-3"},[r("button",{class:"btn btn-dark"},"Login")],-1)),r("p",E,[s[6]||(s[6]=h(" Don't have account ")),v(w,{to:"/register",class:"text-info"},{default:y(()=>s[5]||(s[5]=[h("Register here")])),_:1})])],32)])])}const L=f(x,[["render",N]]);export{L as default};
